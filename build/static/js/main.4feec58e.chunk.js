(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{21:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(0),o=t(1),u=t.n(o),r=t(15),a=t.n(r),i=(t(21),t(6)),s=t(3),l=t(4),d=t.n(l),j="/api/persons",b=function(){return d.a.get(j).then((function(e){return e.data}))},f=function(e){return d.a.post(j,e).then((function(e){return e.data}))},m=function(e,n){return d.a.put("".concat(j,"/").concat(e),n).then((function(e){return e.data}))},h=function(e){return d.a.delete("".concat(j,"/").concat(e)).then((function(e){return e.data}))},O=function(e){var n=e.message;return null===n?null:Object(c.jsx)("div",{className:"notification",children:n})},p=function(e){var n=e.message;return null===n?null:Object(c.jsx)("div",{className:"error_message",children:n})},v=function(e){return Object(c.jsxs)("div",{children:["filter shown with:",Object(c.jsx)("input",{value:e.filterInput,onChange:e.handleFilterInput})]})},x=function(e){return Object(c.jsx)("div",{children:Object(c.jsxs)("form",{onSubmit:e.addPerson,children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{value:e.newName,onChange:e.handleNameInput})]}),Object(c.jsxs)("div",{children:["number: ",Object(c.jsx)("input",{value:e.newNumber,onChange:e.handleNumberInput})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})})},g=function(e){return Object(c.jsx)("div",{children:Object(c.jsxs)("div",{children:[e.name," ",e.number,Object(c.jsx)("button",{onClick:e.deletePerson,children:"Delete"})]})})},w=function(){var e=Object(o.useState)([]),n=Object(s.a)(e,2),t=n[0],u=n[1],r=Object(o.useState)(""),a=Object(s.a)(r,2),l=a[0],d=a[1],j=Object(o.useState)(""),w=Object(s.a)(j,2),C=w[0],L=w[1],N=Object(o.useState)(""),I=Object(s.a)(N,2),S=I[0],k=I[1],y=Object(o.useState)(null),P=Object(s.a)(y,2),F=P[0],T=P[1],D=Object(o.useState)(null),A=Object(s.a)(D,2),B=A[0],E=A[1],J=t.map((function(e){return e})).filter((function(e){return e.name.toLocaleLowerCase().includes(S.toLocaleLowerCase())}));Object(o.useEffect)((function(){b().then((function(e){u(e)}))}),[]),console.log(t);return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"Phonebook"}),Object(c.jsx)(O,{message:F}),Object(c.jsx)(p,{message:B}),Object(c.jsx)(v,{filterInput:S,handleFilterInput:function(e){k(e.target.value)}}),Object(c.jsx)("h2",{children:"add a new"}),Object(c.jsx)(x,{persons:t,newName:l,newNumber:C,addPerson:function(e){e.preventDefault();var n={name:l,number:C,id:t.length+1};if(t.some((function(e){return e.name.toLocaleLowerCase()===l.trim().toLocaleLowerCase()}))||t.some((function(e){return e.number===C}))){window.confirm("".concat(l," is already added to the phonebook would you like to update the number?"));var c=t.find((function(e){return e.name.toLocaleLowerCase()===l.trim().toLocaleLowerCase()})),o=Object(i.a)(Object(i.a)({},c),{},{number:C});m(o.id,o).then((function(e){u(t.map((function(n){return n.name!==o.name?n:e}))),T("Updated ".concat(c.name)),setTimeout((function(){T(null)}),3e3),d(""),L("")})).catch((function(e){E("Contact of ".concat(c.name," already removed from server")),setTimeout((function(){E(null)}),3e3)}))}else f(n).then((function(e){u(t.concat(e)),T("Added ".concat(n.name)),setTimeout((function(){T(null)}),3e3),d(""),L("")}))},handleNameInput:function(e){d(e.target.value)},handleNumberInput:function(e){L(e.target.value)}}),Object(c.jsxs)("div",{children:[Object(c.jsx)("h3",{children:"Numbers:"}),J.map((function(e){return Object(c.jsx)(g,{name:e.name,number:e.number,deletePerson:function(){return function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Are you sure you want to delete ".concat(n.name,"?"))&&h(e).then((function(){u(t.filter((function(n){return n.id!==e}))),T("Deleted ".concat(n.name)),setTimeout((function(){T(null)}),3e3),console.log(t)})).catch((function(e){console.log(e)}))}(e.id)}},e.id)}))]})]})},C=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,41)).then((function(n){var t=n.getCLS,c=n.getFID,o=n.getFCP,u=n.getLCP,r=n.getTTFB;t(e),c(e),o(e),u(e),r(e)}))};a.a.render(Object(c.jsx)(u.a.StrictMode,{children:Object(c.jsx)(w,{})}),document.getElementById("root")),C()}},[[40,1,2]]]);
//# sourceMappingURL=main.4feec58e.chunk.js.map