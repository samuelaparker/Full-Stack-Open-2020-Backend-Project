(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{21:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(0),o=t(1),u=t.n(o),a=t(15),r=t.n(a),i=(t(21),t(6)),s=t(3),d=t(4),l=t.n(d),b="/api/persons",m=function(){return l.a.get(b).then((function(e){return e.data}))},f=function(e){return l.a.post(b,e).then((function(e){return e.data}))},j=function(e,n){return l.a.put("".concat(b,"/").concat(e),n).then((function(e){return e.data}))},h=function(e){return l.a.delete("".concat(b,"/").concat(e)).then((function(e){return e.data}))},O=function(e){var n=e.message;return null===n?null:Object(c.jsx)("div",{className:"notification",children:n})},p=function(e){var n=e.message;return null===n?null:Object(c.jsx)("div",{className:"error_message",children:n})},v=function(e){return Object(c.jsxs)("div",{children:["filter shown with:",Object(c.jsx)("input",{value:e.filterInput,onChange:e.handleFilterInput})]})},x=function(e){return Object(c.jsx)("div",{children:Object(c.jsxs)("form",{onSubmit:e.addPerson,children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{value:e.newName,onChange:e.handleNameInput})]}),Object(c.jsxs)("div",{children:["number: ",Object(c.jsx)("input",{value:e.newNumber,onChange:e.handleNumberInput})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})})},g=function(e){return Object(c.jsx)("div",{children:Object(c.jsxs)("div",{children:[e.name," ",e.number,Object(c.jsx)("button",{onClick:e.deletePerson,children:"Delete"})]})})},w=function(){var e=Object(o.useState)([]),n=Object(s.a)(e,2),t=n[0],u=n[1],a=Object(o.useState)(""),r=Object(s.a)(a,2),d=r[0],l=r[1],b=Object(o.useState)(""),w=Object(s.a)(b,2),N=w[0],y=w[1],T=Object(o.useState)(""),I=Object(s.a)(T,2),k=I[0],C=I[1],S=Object(o.useState)(null),F=Object(s.a)(S,2),P=F[0],D=F[1],L=Object(o.useState)(null),q=Object(s.a)(L,2),A=q[0],B=q[1],E=t.map((function(e){return e})).filter((function(e){return e.name.toLocaleLowerCase().includes(k.toLocaleLowerCase())}));Object(o.useEffect)((function(){m().then((function(e){u(e)}))}),[]);return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"Phonebook"}),Object(c.jsx)(O,{message:P}),Object(c.jsx)(p,{message:A}),Object(c.jsx)(v,{filterInput:k,handleFilterInput:function(e){C(e.target.value)}}),Object(c.jsx)("h2",{children:"add a new"}),Object(c.jsx)(x,{persons:t,newName:d,newNumber:N,addPerson:function(e){if(e.preventDefault(),(d?N?!t.find((function(e){return e.name===d&&e.number===N}))||(setTimeout((function(){B("".concat(d," with number ").concat(N," is already in the phonebook."))}),3e3),0):(setTimeout((function(){B("number required")}),3e3),0):(setTimeout((function(){B("name required")}),3e3),0))&&!function(){var e=t.find((function(e){return e.name===d})),n=t.find((function(e){return e.number===N}));if(e&&n)return B("There is already a person with name ".concat(d," (number ").concat(e.number,") and there is already number ").concat(N," (belonging to ").concat(n.name,")")),!0;if(!e&&!n)return!1;if(e&&!window.confirm("Name ".concat(d," is already in the phonebook.\nDo you want to update the number to ").concat(N,"?")))return!1;if(n&&!window.confirm("Number ".concat(N," is already in the phonebook.\nDo you want to update the name to ").concat(d,"?")))return!1;var c=e||n,o=c.id;return j(o,Object(i.a)(Object(i.a)({},c),{},{name:d,number:N})).then((function(e){u(t.map((function(n){return n.id!==o?n:e}))),l(""),y(""),setTimeout((function(){D("Updated ".concat(c.name,"'s number"))}),3e3)})).catch((function(e){B(e,c.name,o)?(l(""),y("")):setTimeout((function(){B("Failed to update ".concat(c.name,"'s number on the server. ","".concat(e.response.data.message)))}),3e3)})),!0}()){var n={name:d,number:N};f(n).then((function(e){D("Added ".concat(e.name)),setTimeout((function(){D(null)}),3e3),u(t.concat(e)),l(""),y("")})).catch((function(e){setTimeout((function(){B("Failed to add ".concat(n.name,". ","".concat(e.response.data.message)))}),3e3)}))}},handleNameInput:function(e){l(e.target.value)},handleNumberInput:function(e){y(e.target.value)}}),Object(c.jsxs)("div",{children:[Object(c.jsx)("h3",{children:"Numbers:"}),E.map((function(e){return Object(c.jsx)(g,{name:e.name,number:e.number,deletePerson:function(){return function(e){var n=t.find((function(n){return n.id===e}));console.log(e),window.confirm("Are you sure you want to delete ".concat(n.name,"?"))&&h(e).then((function(){u(t.filter((function(n){return n.id!==e}))),D("Deleted ".concat(n.name)),setTimeout((function(){D(null)}),3e3),console.log(t)})).catch((function(e){console.log(e)}))}(e.id)}},e.id)}))]})]})},N=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,41)).then((function(n){var t=n.getCLS,c=n.getFID,o=n.getFCP,u=n.getLCP,a=n.getTTFB;t(e),c(e),o(e),u(e),a(e)}))};r.a.render(Object(c.jsx)(u.a.StrictMode,{children:Object(c.jsx)(w,{})}),document.getElementById("root")),N()}},[[40,1,2]]]);
//# sourceMappingURL=main.12dde20c.chunk.js.map